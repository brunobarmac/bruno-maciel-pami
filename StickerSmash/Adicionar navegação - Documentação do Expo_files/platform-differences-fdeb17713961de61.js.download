try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="4eddd5a5-b4b5-4a76-bbae-36666db0b17f",e._sentryDebugIdIdentifier="sentry-dbid-4eddd5a5-b4b5-4a76-bbae-36666db0b17f")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[12587],{7759:(e,t,n)=>{"use strict";n.a(e,async(e,s)=>{try{n.d(t,{A:()=>y});var r=n(37876),a=n(66028),i=n(97342),o=n(14232),l=n(34523),c=n(37683),d=n(96427),m=n(36981),p=n(44920),u=n(83508),h=n(50532),x=n(38938),f=n(71275),g=n(66907),b=e([l]);l=(b.then?(await b)():b)[0];let{X1:j}=m,y=e=>{let{dependencies:t=[],label:n,defaultPlatform:s,templateId:m,files:b,platforms:y,contentHidden:w,children:v}=e,N=(0,o.useRef)(null),[C,k]=(0,o.useState)(!1),S=(0,d.zs)();(0,o.useEffect)(()=>{k(!0)},[]);let I=()=>{let{version:e}=S;return"latest"===e?j:e},{language:E,value:P}=(0,l._Y)(v);return(0,r.jsxs)(h.Y,{className:"mb-3 flex flex-col prose-pre:!m-0 prose-pre:!border-0",children:[(0,r.jsx)(g.L,{title:n??"Example",Icon:a.SnackLogo,children:(0,r.jsxs)("form",{action:c.Z,method:"POST",target:"_blank",className:"contents",children:[(0,r.jsx)("input",{type:"hidden",name:"platform",value:s??"android"}),(0,r.jsx)("input",{type:"hidden",name:"name",value:n??"Example"}),(0,r.jsx)("input",{type:"hidden",name:"dependencies",value:t.join(",")}),(0,r.jsx)("input",{type:"hidden",name:"sdkVersion",value:(()=>{let e=I();return"unversioned"===e&&(e=j),e.replace("v","")})()}),y&&(0,r.jsx)("input",{type:"hidden",name:"supportedPlatforms",value:y.join(",")}),C&&(0,r.jsx)("input",{type:"hidden",name:"files",value:JSON.stringify((0,c.C)({templateId:m,code:P,files:b,baseURL:`${document.location.origin}/static/examples/${I()}`,codeLanguage:E}))}),(0,r.jsx)(p.e,{text:(0,l.e6)(P)}),(0,r.jsx)(x.g,{disabled:!C,rightSlot:(0,r.jsx)(i.ArrowUpRightIcon,{className:"icon-sm text-icon-secondary"}),className:"max-sm-gutters:gap-0 [&_p]:max-sm-gutters:hidden",type:"submit",children:(0,r.jsxs)("span",{className:"max-sm-gutters:hidden",children:[(0,r.jsx)("span",{className:"max-md-gutters:hidden",children:"Open in "}),"Snack"]})}),(0,r.jsx)(u.C,{})]})}),(0,r.jsx)(f.R,{ref:N,className:(0,a.mergeClasses)("p-0",w&&"hidden"),children:v})]})};s()}catch(e){s(e)}})},19002:(e,t,n)=>{"use strict";n.d(t,{B:()=>h});var s=n(37876),r=n(66028),a=n(97342),i=n(44527),o=n(25833),l=n(75298),c=n(50532),d=n(38938),m=n(71275),p=n(66907),u=n(44920);let h=e=>{let{cmd:t,cmdCopy:n,hideOverflow:a,className:o,title:l="Terminal",browserAction:d}=e;return(0,s.jsxs)(c.Y,{className:(0,r.mergeClasses)("terminal-snippet [li_&]:mt-4",o),children:[(0,s.jsxs)(p.L,{alwaysDark:!0,title:l,Icon:i.TerminalSquareIcon,children:[d&&(0,s.jsx)(f,{...d}),(0,s.jsx)(x,{cmd:t,cmdCopy:n})]}),(0,s.jsx)(m.R,{alwaysDark:!0,hideOverflow:a,className:"flex flex-col",children:t.map(g)})]})},x=e=>{let{cmd:t,cmdCopy:n}=e,r=n??function(e){let t=e.filter(e=>!e.startsWith("#")&&""!==e);if(1===t.length)return t[0].startsWith("$")?t[0].slice(2):t[0]}(t);return r?(0,s.jsx)(u.e,{alwaysDark:!0,text:r}):null},f=e=>{let{href:t,label:n}=e;return(0,s.jsx)(d.g,{alwaysDark:!0,className:"max-sm-gutters:gap-0 [&_p]:max-sm-gutters:hidden",rightSlot:(0,s.jsx)(a.ArrowUpRightIcon,{className:"icon-sm shrink-0 text-icon-secondary"}),onClick:()=>{window.open(t,"_blank","noopener,noreferrer")},children:n})};function g(e,t){let n=`line-${t}`;return""===e.trim()?(0,s.jsx)("br",{className:"select-none"},n):e.startsWith("#")?(0,s.jsx)(l.Sq,{className:"select-none whitespace-pre !border-none !bg-transparent !text-palette-gray10",children:e},n):e.startsWith("$")?(0,s.jsxs)("div",{className:"w-fit",children:[(0,s.jsx)(l.Sq,{className:"select-none whitespace-pre !border-none !bg-transparent !text-secondary",children:"-\xa0"}),(0,s.jsx)(l.Sq,{className:"whitespace-pre !border-none !bg-transparent text-default",dangerouslySetInnerHTML:{__html:o.Prism.highlight(e.slice(1).trim(),o.Prism.languages.bash,"bash")}})]},n):(0,s.jsx)(l.Sq,{className:"whitespace-pre !border-none !bg-transparent text-default",children:e},n)}},19618:(e,t,n)=>{"use strict";n.d(t,{b:()=>h});var s=n(37876),r=n(97342),a=n(12976),i=n(14232),o=n(27013),l=n(83508),c=n(50532),d=n(38938),m=n(71275),p=n(66907);let u=()=>Math.random().toString(36).slice(2,9),h=e=>{let{source:t,raw:n,filenameModifier:h=e=>e,filenameToLinkUrl:x,showOperation:f=!1,collapseDeletedFiles:g=!1,SnippetHeaderComponent:b=p.L}=e,[j,y]=(0,i.useState)(n?(0,o.FR)(n):null);return((0,i.useEffect)(()=>{t&&(async()=>{let e=await fetch(t),n=await e.text();y((0,o.FR)(n))})()},[t]),j)?(0,s.jsx)(s.Fragment,{children:j.map(e=>{let{oldRevision:t=u(),newRevision:n=u(),type:i,hunks:p,newPath:j,oldPath:y}=e;return 0===p.length?null:(0,s.jsxs)(c.Y,{children:[(0,s.jsxs)(b,{title:`${h("delete"===i?y:j)}`,Icon:a.Copy07Icon,operationType:i,showOperation:f,float:g&&"delete"===i,children:[j&&x&&"delete"!==i?(0,s.jsx)(d.g,{rightSlot:(0,s.jsx)(r.ArrowUpRightIcon,{className:"icon-sm shrink-0 text-icon-secondary"}),onClick:()=>{window.open(x(j),"_blank")},children:"Raw"}):null,(0,s.jsx)(l.C,{})]}),g&&"delete"===i?null:(0,s.jsx)(m.R,{className:"p-0",hideOverflow:!0,children:(0,s.jsx)(o.oO,{viewType:"unified",diffType:i,hunks:p,children:e=>e.map(e=>(0,s.jsx)(o.D9,{hunk:e},e.content))})})]},t+"-"+n)})}):null}},23352:(e,t,n)=>{"use strict";n.d(t,{N:()=>p});var s=n(37876),r=n(66028),a=n(34323),i=n(58626),o=n(34824),l=n(14232),c=n(14176),d=n(67286),m=n(75298);let p=(0,c.A)(e=>{let{summary:t,testID:n,children:c,className:p,headingManager:u,open:h=!1}=e,[x,f]=(0,l.useState)(h),g=(0,o.useRouter)(),b=(0,l.useRef)(null),j=(0,l.useRef)(u.addHeading(t,1,void 0));return(0,l.useEffect)(()=>{if(g?.asPath){let e=g.asPath.split("#"),t=e.length>0?e[1]:void 0;t&&t===j.current.slug&&b?.current?.setAttribute("open","")}},[]),(0,s.jsxs)("details",{ref:b,id:j.current.slug,onToggle:e=>{f(e.currentTarget.open)},className:(0,r.mergeClasses)("mb-3 scroll-m-4 rounded-md border border-default bg-default p-0","[&[open]]:shadow-xs","[h4+&]:mt-3 [li>&]:mt-3 [p+&]:mt-3",p),open:x,children:[(0,s.jsxs)("summary",{className:(0,r.mergeClasses)("group m-0 grid cursor-pointer grid-cols-[min-content_auto_min-content_1fr] items-center rounded-md bg-subtle p-1.5 pr-3","[details[open]>&]:rounded-b-none","[&_h4]:my-0","[&_code]:mt-px [&_code]:inline [&_code]:bg-element [&_code]:pb-px [&_code]:text-[85%] [&_code]:leading-snug"),children:[(0,s.jsx)("div",{className:"ml-1.5 mr-2 mt-[5px] self-baseline",children:(0,s.jsx)(a.TriangleDownIcon,{className:(0,r.mergeClasses)("icon-sm text-icon-default","-rotate-90 transition-transform duration-200","[details[open]>summary_&]:rotate-0")})}),(0,s.jsx)(m.M9,{className:(0,r.mergeClasses)("relative mr-1 inline scroll-m-5 items-center gap-1.5","group-hover:text-secondary group-hover:[&_code]:text-secondary"),children:t}),(0,s.jsx)(r.LinkBase,{href:"#"+j.current.slug,ref:j.current.ref,onClick:()=>{b?.current?.setAttribute("open","")},className:"ml-auto inline rounded-md p-1 hocus:bg-element","aria-label":"Permalink",children:(0,s.jsx)(d.B,{className:"icon-sm invisible inline-flex group-hover:visible group-focus-visible:visible"})}),(0,s.jsx)("div",{})]}),(0,s.jsx)(i.P.div,{initial:!1,animate:{transition:{type:"tween"},height:x?"auto":0},className:"overflow-hidden",children:(0,s.jsx)("div",{className:(0,r.mergeClasses)("px-5 py-4","last:[&>*]:!mb-1 [&_p]:ml-0 [&_pre>pre]:mt-0"),children:c})})]})})},34323:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});let s=n(14232),r=n(71894),a=function(e){let t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(let n in e)if("default"!==n){let s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:()=>e[n]})}}return t.default=e,Object.freeze(t)}(s);function i({className:e,...t}){let n=r.mergeClasses("icon-md text-icon-default translate-z shrink-0",e);return a.createElement("svg",{fill:"none",viewBox:"0 0 24 24",className:n,role:"img",...t},a.createElement("g",{id:"triangle-down-custom-icon"},a.createElement("path",{id:"Vector 250",fill:"currentColor",d:"M18.8831 9.43005H5.11694L12 16.3131L18.8831 9.43005Z"})))}i.displayName="TriangleDownIcon",t.TriangleDownIcon=i},37683:(e,t,n)=>{"use strict";n.d(t,{C:()=>r,Z:()=>s});let s="https://snack.expo.dev";function r(e){let{templateId:t,code:n,files:s,baseURL:r,codeLanguage:a}=e,i={};return s&&Object.keys(s).forEach(e=>{let t=s[e];/\.(jsx?|tsx?|json|md)$/i.test(e)?i[e]={type:"CODE",url:/^https?:\/\//.test(t)?t:`${r}/${t}`}:i[e]={type:"ASSET",contents:t}}),t?"jsx"===a?i["App.js"]={type:"CODE",url:`${r}/${t}.js`}:i["App.tsx"]={type:"CODE",url:`${r}/${t}.tsx`}:n&&("jsx"===a?i["App.js"]={type:"CODE",contents:n}:i["App.tsx"]={type:"CODE",contents:n}),i}},38955:(e,t,n)=>{"use strict";n.d(t,{s:()=>p});var s=n(37876),r=n(66028),a=n(41711),i=n(84437),o=n(65987),l=n(75298),c=n(15294);function d(e){let{size:t="md",className:n}=e;return(0,s.jsx)("div",{className:(0,r.mergeClasses)("flex items-center justify-center rounded-full border-2 border-success bg-success","md"===t&&"size-20","sm"===t&&"size-15",n),children:(0,s.jsx)(c.CheckIcon,{className:(0,r.mergeClasses)("text-success","md"===t&&"size-10","sm"===t&&"size-[30px]")})})}var m=n(8051);function p(e){let{currentChapterIndex:t,name:n,summary:c,nextChapterTitle:p,nextChapterDescription:u,nextChapterLink:h}=e,{chapters:x,setChapters:f,getStartedChapters:g,setGetStartedChapters:b}=(0,i.N)(),j="GET_STARTED"===n,y=j?g[t]:x[t];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mx-auto flex w-full flex-col gap-4 rounded-lg border-2 border-palette-gray4 px-4 py-5",children:[(0,s.jsx)(d,{size:"sm",className:(0,r.mergeClasses)("mx-auto flex items-center justify-center grayscale transition duration-300",y.completed&&"border-palette-green5 grayscale-0")}),(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2",children:[(0,s.jsxs)("p",{className:"flex items-center text-center font-semibold text-default heading-lg",children:[(0,s.jsx)(a.BookOpen02Icon,{className:"mr-2 size-6 text-icon-secondary max-md-gutters:hidden"})," ",y.title]}),(0,s.jsx)("p",{className:"max-w-[60ch] pb-2 text-center leading-normal text-secondary",children:c})]}),(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)(m.S,{id:`chapter-${t}`,checked:y.completed,label:y.completed?"Mark this chapter as unread":"Mark this chapter as read",onChange:j?()=>{y.completed?b(g.map((e,n)=>n===t?{...e,completed:!1}:e)):b(g.map((e,n)=>n===t?{...e,completed:!0}:e))}:()=>{y.completed?f(x.map((e,n)=>n===t?{...e,completed:!1}:e)):f(x.map((e,n)=>n===t?{...e,completed:!0}:e))}})})]}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.P,{className:"my-4",children:u}),(0,s.jsx)(o.u,{href:h,title:`Next: ${p}`,Icon:a.BookOpen02Icon})]})]})}},58604:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/tutorial/platform-differences",function(){return n(70805)}])},58674:(e,t,n)=>{"use strict";n.d(t,{r:()=>l});var s=n(37876),r=n(66028),a=n(97342),i=n(83038),o=n(75298);function l(e){let{title:t,description:n,videoId:l,time:c,className:d}=e;return(0,s.jsxs)(r.LinkBase,{openInNewTab:!0,href:`https://www.youtube.com/watch?v=${l}${c?`&t=${c}`:""}`,className:(0,r.mergeClasses)("group relative flex items-stretch overflow-hidden rounded-lg border border-default bg-default shadow-xs transition","hocus:bg-subtle hocus:shadow-sm","max-sm-gutters:flex-col","[&+hr]:!mt-6",d),"aria-label":`Watch video: ${t} (opens in new tab)`,children:[(0,s.jsxs)("div",{className:(0,r.mergeClasses)("relative flex max-w-[200px] items-center justify-center overflow-hidden border-r border-secondary bg-element","max-sm-gutters:max-w-full max-sm-gutters:border-b max-sm-gutters:border-r-0"),children:[(0,s.jsx)("img",{src:`https://i3.ytimg.com/vi/${l}/maxresdefault.jpg`,className:"aspect-video transition duration-300 group-hover:scale-105 group-focus-visible:scale-105",alt:t,"aria-label":`Video thumbnail for ${t}`}),(0,s.jsx)("div",{className:"absolute right-[calc(50%-22px)] top-[calc(50%-22px)] flex size-[44px] items-center justify-center rounded-full bg-[#000a]",role:"presentation","aria-hidden":"true",children:(0,s.jsx)(i.PlaySolidIcon,{className:"icon-lg ml-0.5 text-palette-white"})})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-center gap-1 px-4 py-2",children:[(0,s.jsx)(o.d_,{className:"flex items-center gap-1.5 leading-normal",children:t}),n&&(0,s.jsx)(o.Tk,{theme:"secondary",className:"flex items-center gap-2",children:n})]}),(0,s.jsx)(a.ArrowUpRightIcon,{className:"icon-md my-auto ml-auto mr-4 shrink-0 text-icon-secondary max-sm-gutters:hidden","aria-hidden":"true"})]})}},65987:(e,t,n)=>{"use strict";n.d(t,{u:()=>l});var s=n(37876),r=n(66028),a=n(39949),i=n(97342),o=n(75298);function l(e){let{title:t,description:n,href:l,testID:c,Icon:d,imageUrl:m}=e,p=!!l?.startsWith("http"),u=p?i.ArrowUpRightIcon:a.ArrowRightIcon;return(0,s.jsxs)(r.LinkBase,{href:l,className:(0,r.mergeClasses)("group mb-3 flex flex-row justify-between rounded-md border border-solid border-default px-4 py-3 transition","hocus:bg-subtle hocus:shadow-xs"),openInNewTab:p,children:[(0,s.jsxs)("div",{className:"flex flex-row gap-4",children:[d&&(0,s.jsx)("div",{className:"flex h-9 min-w-[36px] items-center justify-center self-center rounded-md bg-element transition group-hover:bg-hover",children:(0,s.jsx)(d,{className:"icon-lg text-icon-default"})}),m&&(0,s.jsx)("img",{className:"!h-9 !w-9 self-center",src:m,alt:"Icon"}),(0,s.jsxs)("div",{className:"flex flex-col self-center",children:[(0,s.jsx)(o.M9,{children:t}),n&&(0,s.jsx)(o.Tk,{theme:"secondary",children:n})]})]}),(0,s.jsx)(u,{className:"ml-3 min-w-[20px] content-end self-center text-icon-secondary"})]})}},70805:(e,t,n)=>{"use strict";n.a(e,async(e,s)=>{try{n.r(t),n.d(t,{__N_SSG:()=>h,default:()=>f,headings:()=>b,meta:()=>g});var r=n(37876),a=n(91668),i=n(23352),o=n(72486),l=n(38955),c=n(94275),d=n(87249),m=n(75298),p=n(58674),u=e([c]);c=(u.then?(await u)():u)[0];var h=!0;let g={modificationDate:"September 02, 2025",title:"Handle platform differences",description:"In this tutorial, learn how to handle platform differences between native and web when creating a universal app.",hasVideoLink:!0},b=[{depth:2,type:"text",title:"Install and import dom-to-image"},{depth:2,type:"text",title:"Add platform-specific code"},{depth:2,type:"text",title:"Summary"}];function x(e){let t={a:"a",code:"code",h2:"h2",hr:"hr",kbd:"kbd",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["Android, iOS, and the web have different capabilities. In our case, both Android and iOS can capture a screenshot with the ",(0,r.jsx)(t.code,{children:"react-native-view-shot"})," library. However, web browsers cannot."]}),"\n",(0,r.jsx)(t.p,{children:"In this chapter, we'll learn how to handle capturing screenshots for web browsers so our app has the same functionality on all platforms."}),"\n",(0,r.jsx)(p.r,{videoId:"mEKQvF4irBM",title:"Watch: Handling platform differences in your universal Expo app"}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsxs)(d.p,{label:"1",children:[(0,r.jsx)(t.h2,{id:"install-and-import-dom-to-image",children:"Install and import dom-to-image"}),(0,r.jsxs)(t.p,{children:["To capture a screenshot on the web and save it as an image, we'll use a third-party library called ",(0,r.jsx)(t.a,{href:"https://github.com/tsayen/dom-to-image#readme",children:(0,r.jsx)(t.code,{children:"dom-to-image"})}),". It takes a screenshot of any DOM node and turns it into a vector (SVG) or raster (PNG or JPEG) image."]}),(0,r.jsx)(t.p,{children:"Stop the development server and run the following command to install the library:"}),(0,r.jsx)(c.BK,{cmd:["$ npm install dom-to-image"]}),(0,r.jsxs)(t.p,{children:["After installing it, make sure to restart the development server and press ",(0,r.jsx)(t.kbd,{children:"w"})," in the terminal."]})]}),"\n",(0,r.jsxs)(d.p,{label:"2",children:[(0,r.jsx)(t.h2,{id:"add-platform-specific-code",children:"Add platform-specific code"}),(0,r.jsxs)(t.p,{children:["Using ",(0,r.jsx)(t.code,{children:"Platform"})," module from React Native, we can implement platform-specific behavior. Inside ",(0,r.jsx)(t.strong,{children:"app/(tabs)/index.tsx"}),":"]}),(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Import the ",(0,r.jsx)(t.code,{children:"Platform"})," module from ",(0,r.jsx)(t.code,{children:"react-native"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Import the ",(0,r.jsx)(t.code,{children:"domtoimage"})," library from ",(0,r.jsx)(t.code,{children:"dom-to-image"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Update the ",(0,r.jsx)(t.code,{children:"onSaveImageAsync()"})," function to check whether the current platform is ",(0,r.jsx)(t.code,{children:"'web'"})," with the ",(0,r.jsx)(t.code,{children:"Platform.OS"})," property. If it is ",(0,r.jsx)(t.code,{children:"'web'"}),", we'll use the ",(0,r.jsx)(t.code,{children:"domtoimage.toJpeg()"})," method to convert and capture the current ",(0,r.jsx)(t.code,{children:"<View>"})," as a JPEG image. Otherwise, we'll keep using the same logic added for native platforms."]}),"\n"]}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",children:"@@@app/(tabs)/index.tsx@@@import * as ImagePicker from 'expo-image-picker';\nimport * as MediaLibrary from 'expo-media-library';\nimport { useEffect, useRef, useState } from 'react';\nimport { ImageSourcePropType, View, StyleSheet, /* @tutinfo */Platform/* @end */ } from 'react-native';\nimport { GestureHandlerRootView } from 'react-native-gesture-handler';\nimport { captureRef } from 'react-native-view-shot';\n/* @tutinfo Import <CODE>domtoimage</CODE> library. */import domtoimage from 'dom-to-image';/* @end */\n\nimport Button from '@/components/Button';\nimport ImageViewer from '@/components/ImageViewer';\nimport IconButton from '@/components/IconButton';\nimport CircleButton from '@/components/CircleButton';\nimport EmojiPicker from '@/components/EmojiPicker';\nimport EmojiList from '@/components/EmojiList';\nimport EmojiSticker from '@/components/EmojiSticker';\n\nconst PlaceholderImage = require('@/assets/images/background-image.png');\n\nexport default function Index() {\n  const [selectedImage, setSelectedImage] = useState<string | undefined>(undefined);\n  const [showAppOptions, setShowAppOptions] = useState<boolean>(false);\n  const [isModalVisible, setIsModalVisible] = useState<boolean>(false);\n  const [pickedEmoji, setPickedEmoji] = useState<ImageSourcePropType | undefined>(undefined);\n  const [permissionResponse, requestPermission] = MediaLibrary.usePermissions();\n\n  const imageRef = useRef<View>(null);\n\n  useEffect(() => {\n    if (!permissionResponse?.granted) {\n      requestPermission();\n    }\n  }, []);\n\n  const pickImageAsync = async () => {\n    let result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ['images'],\n      allowsEditing: true,\n      quality: 1,\n    });\n\n    if (!result.canceled) {\n      setSelectedImage(result.assets[0].uri);\n      setShowAppOptions(true);\n    } else {\n      alert('You did not select any image.');\n    }\n  };\n\n  const onReset = () => {\n    setShowAppOptions(false);\n  };\n\n  const onAddSticker = () => {\n    setIsModalVisible(true);\n  };\n\n  const onModalClose = () => {\n    setIsModalVisible(false);\n  };\n\n  const onSaveImageAsync = async () => {\n    /* @tutinfo Add the if condition here to check whether the current platform is web or not. */\n    if (Platform.OS !== 'web') {\n    /* @end */\n      try {\n        const localUri = await captureRef(imageRef, {\n          height: 440,\n          quality: 1,\n        });\n\n        await MediaLibrary.saveToLibraryAsync(localUri);\n        if (localUri) {\n          alert('Saved!');\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    /* @tutinfo Add an else condition to run the logic when the current platform is the web. */\n    } else {\n      try {\n        const dataUrl = await domtoimage.toJpeg(imageRef.current, {\n          quality: 0.95,\n          width: 320,\n          height: 440,\n        });\n\n        let link = document.createElement('a');\n        link.download = 'sticker-smash.jpeg';\n        link.href = dataUrl;\n        link.click();\n      } catch (e) {\n        console.log(e);\n      }\n    }\n    /* @end */\n  };\n\n  return (\n    <GestureHandlerRootView style={styles.container}>\n      <View style={styles.imageContainer}>\n        <View ref={imageRef} collapsable={false}>\n          <ImageViewer imgSource={PlaceholderImage} selectedImage={selectedImage} />\n          {pickedEmoji && <EmojiSticker imageSize={40} stickerSource={pickedEmoji} />}\n        </View>\n      </View>\n      {showAppOptions ? (\n        <View style={styles.optionsContainer}>\n          <View style={styles.optionsRow}>\n            <IconButton icon=\"refresh\" label=\"Reset\" onPress={onReset} />\n            <CircleButton onPress={onAddSticker} />\n            <IconButton icon=\"save-alt\" label=\"Save\" onPress={onSaveImageAsync} />\n          </View>\n        </View>\n      ) : (\n        <View style={styles.footerContainer}>\n          <Button theme=\"primary\" label=\"Choose a photo\" onPress={pickImageAsync} />\n          <Button label=\"Use this photo\" onPress={() => setShowAppOptions(true)} />\n        </View>\n      )}\n      <EmojiPicker isVisible={isModalVisible} onClose={onModalClose}>\n        <EmojiList onSelect={setPickedEmoji} onCloseModal={onModalClose} />\n      </EmojiPicker>\n    </GestureHandlerRootView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#25292e',\n    alignItems: 'center',\n  },\n  imageContainer: {\n    flex: 1,\n  },\n  footerContainer: {\n    flex: 1 / 3,\n    alignItems: 'center',\n  },\n  optionsContainer: {\n    position: 'absolute',\n    bottom: 80,\n  },\n  optionsRow: {\n    alignItems: 'center',\n    flexDirection: 'row',\n  },\n});\n"})}),(0,r.jsxs)(i.N,{summary:(0,r.jsxs)(r.Fragment,{children:["Fix ",(0,r.jsx)(m.Sq,{children:"dom-to-image"})," TypeScript module error"]}),children:[(0,r.jsxs)(t.p,{children:["We need to add a type definition after importing the ",(0,r.jsx)(t.code,{children:"domtoimage"})," library since we're using TypeScript. We can do this by creating a file ",(0,r.jsx)(t.strong,{children:"types.d.ts"})," in the root of our project directory and adding the declaration statement:"]}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",children:"@@@types.d.ts@@@declare module 'dom-to-image';\n"})})]}),(0,r.jsx)(t.p,{children:"On running the app in a web browser, we can now save a screenshot:"}),(0,r.jsx)(o.C,{file:"tutorial/web.mp4"})]}),"\n",(0,r.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(l.s,{currentChapterIndex:7,name:"GET_STARTED",summary:"The app does everything we set out for it to do, so it's time to shift our focus toward the purely aesthetic..",nextChapterDescription:"In the next chapter, we will customize the app's status bar, splash screen, and app icon.",nextChapterTitle:"Configure status bar, splash screen and app icon",nextChapterLink:"/tutorial/configuration"})]})}function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(x,{...e})}):x(e)}s()}catch(e){s(e)}})},72486:(e,t,n)=>{"use strict";n.d(t,{C:()=>u});var s=n(37876),r=n(66028),a=n(12619),i=n(18847),o=n.n(i),l=n(14232),c=n(46924),d=n(30441);function m(e){let{src:t,alt:n,...r}=e,[a,i]=(0,l.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{type:"button",onClick:()=>{i(!0)},children:(0,s.jsx)("img",{src:t,alt:n,...r})}),(0,s.jsx)(c.Yf,{open:a,close:()=>{i(!1)},slides:[{src:t}],styles:{container:{backgroundColor:"rgba(0, 0, 0, .8)"}},controller:{aria:!0,closeOnBackdropClick:!0},carousel:{finite:!0},render:{buttonPrev:()=>null,buttonNext:()=>null},plugins:[d.A]})]})}n(23655);let p=o()(()=>n.e(20845).then(n.t.bind(n,20845,23)),{loadableGenerated:{webpack:()=>[20845]},ssr:!1});function u(e){let{alt:t,src:n,file:i,caption:o,controls:c,loop:d=!0,className:u,containerClassName:h}=e,[x,f]=(0,l.useState)(),g=!!i,b=(0,l.useRef)(null),j=(0,a.W)(b);return(0,s.jsxs)("figure",{className:(0,r.mergeClasses)("my-5 cursor-pointer rounded-lg py-2.5 text-center",h,!g&&"bg-subtle"),onClick:()=>{void 0!==c||x||f(!0)},children:[n?(0,s.jsx)(m,{src:n,alt:t,className:(0,r.mergeClasses)("inline rounded-md transition-opacity duration-default ease-in-out hover:opacity-80",u)}):g?(0,s.jsxs)("div",{className:"relative aspect-video overflow-hidden rounded-lg bg-palette-black",ref:b,children:[(0,s.jsx)(p,{url:`/static/videos/${i}`,className:"react-player",width:"100%",height:"100%",muted:!0,playing:j&&!!i,controls:void 0===c?x:c,playsinline:!0,loop:d}),(0,s.jsx)("div",{className:(0,r.mergeClasses)("pointer-events-none absolute inset-0 transition-opacity duration-500 max-md-gutters:hidden",j?"opacity-0":"opacity-70")})]}):null,o&&(0,s.jsx)("figcaption",{className:(0,r.mergeClasses)("mt-3.5 cursor-text px-8 py-2 text-center text-xs text-secondary",g&&"bg-transparent"),children:o})]})}},83038:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});let s=n(14232),r=n(71894),a=function(e){let t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(let n in e)if("default"!==n){let s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:()=>e[n]})}}return t.default=e,Object.freeze(t)}(s);function i({className:e,...t}){let n=r.mergeClasses("icon-md text-icon-default translate-z shrink-0",e);return a.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:n,role:"img",...t},a.createElement("g",{id:"play-solid-icon"},a.createElement("path",{id:"Solid",fillRule:"evenodd",d:"M8.00625 2.80243C8.0182 2.8104 8.03019 2.81839 8.04222 2.82642L18.591 9.8589C18.8962 10.0623 19.1792 10.251 19.3965 10.4263C19.6234 10.6092 19.8908 10.8629 20.0447 11.234C20.2481 11.7245 20.2481 12.2758 20.0447 12.7663C19.8908 13.1374 19.6234 13.391 19.3965 13.574C19.1792 13.7493 18.8962 13.9379 18.591 14.1413L8.00628 21.1978C7.63319 21.4465 7.29772 21.6702 7.01305 21.8245C6.72818 21.9789 6.33717 22.1553 5.8808 22.128C5.29705 22.0932 4.75779 21.8046 4.40498 21.3382C4.12916 20.9736 4.05905 20.5504 4.02949 20.2278C3.99994 19.9053 3.99997 19.5021 4 19.0537L4 4.98975C4 4.97529 4 4.96087 4 4.9465C3.99997 4.49811 3.99994 4.09491 4.02949 3.77249C4.05905 3.44983 4.12916 3.02663 4.40498 2.66202C4.75779 2.19565 5.29705 1.90705 5.8808 1.87219C6.33717 1.84494 6.72818 2.02135 7.01305 2.17573C7.29771 2.33 7.63317 2.55368 8.00625 2.80243Z",clipRule:"evenodd"})))}i.displayName="PlaySolidIcon",t.PlaySolidIcon=i},87249:(e,t,n)=>{"use strict";n.d(t,{p:()=>i});var s=n(37876),r=n(66028),a=n(75298);let i=e=>{let{children:t,label:n}=e;return(0,s.jsxs)("div",{className:"mb-8 mt-6 flex gap-4",children:[(0,s.jsx)(a.ZS,{theme:"secondary",className:(0,r.mergeClasses)("mt-1 flex h-7 min-w-[28px] items-center justify-center rounded-full bg-element",n.length>=3&&"!text-xs"),children:n}),(0,s.jsx)("div",{className:"w-full max-w-[calc(100%-44px)] pt-1.5 prose-h2:!-mt-1.5 prose-h3:!-mt-1 prose-h4:!-mt-px [&>*:last-child]:!mb-0",children:"string"==typeof t?(0,s.jsx)(a.P,{children:t}):t})]})}},94275:(e,t,n)=>{"use strict";n.a(e,async(e,s)=>{try{n.d(t,{A3:()=>a.A,BK:()=>i.B,bk:()=>r.b});var r=n(19618),a=n(7759),i=n(19002),o=e([a]);a=(o.then?(await o)():o)[0],s()}catch(e){s(e)}})}},e=>{e.O(0,[55312,58626,19243,90636,46593,38792],()=>e(e.s=58604)),_N_E=e.O()}]);